# Roadmap –∏ —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π –≤ –ë–î, Chatwoot –∏ 1C:–¶–õ
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (–≤–ª–∞–¥–µ–ª—å—Ü—ã/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–±–æ–Ω–µ–Ω—Ç–∞)
- ‚úÖ ETL –¥–ª—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (PO Types, Sections, Questions, Knowledge Base, Interference)
- ‚úÖ ETL –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π (`pull_cons_cl.py`)
- ‚úÖ ETL –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ (`pull_cons_redate_cl.py`)
- ‚úÖ ETL –¥–ª—è –æ—Ü–µ–Ω–æ–∫ (`pull_cons_rates_cl.py`)
- ‚úÖ ETL –¥–ª—è –¥–æ–∑–≤–æ–Ω–æ–≤ (`pull_calls_cl.py`)
- ‚úÖ ETL –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –Ω–∞–≤—ã–∫–æ–≤ (`pull_users_cl.py`)
- ‚úÖ API –¥–ª—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º (30 –º–∏–Ω)
- ‚úÖ API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—á—Ç–µ–Ω–∏—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π
- ‚úÖ API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ –∏ –æ—Ü–µ–Ω–æ–∫
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ –∏ –æ—Ü–µ–Ω–æ–∫ –≤ 1C:–¶–õ —á–µ—Ä–µ–∑ OData
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ note-—Å–æ–æ–±—â–µ–Ω–∏–π –≤ Chatwoot –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤/–æ—Ü–µ–Ω–æ–∫ —á–µ—Ä–µ–∑ API
- ‚úÖ –í–µ–±—Ö—É–∫–∏ Chatwoot (conversation.created, conversation.updated, conversation.resolved, message.created)
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –º–µ–∂–¥—É Chatwoot –∏ 1C:–¶–õ
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ (—Å–æ–∑–¥–∞–Ω–∏–µ –≤ Chatwoot, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `chatwoot_user_id`)
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (`FRONT_SECRET`)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ (–º–∏–≥—Ä–∞—Ü–∏–∏, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤)
- ‚úÖ Backoff –∏ retry –¥–ª—è OData –∑–∞–ø—Ä–æ—Å–æ–≤ (429, 5xx –æ—à–∏–±–∫–∏)

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ Docker –∏ Docker Compose –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (ARCHITECTURE.md, API_DOCUMENTATION.md, DOCKER_SETUP.md, TROUBLESHOOTING.md)

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–∑–≤–æ–Ω–æ–≤ –≤ Chatwoot –ø—Ä–∏ ETL
  - ETL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç note-—Å–æ–æ–±—â–µ–Ω–∏—è –≤ Chatwoot –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –¥–æ–∑–≤–æ–Ω–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω endpoint `GET /api/consultations/{cons_id}/calls` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–ø—ã—Ç–æ–∫ –¥–æ–∑–≤–æ–Ω–∞
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤/–æ—Ü–µ–Ω–æ–∫ –≤ Chatwoot –ø—Ä–∏ ETL
  - `pull_cons_redate_cl.py` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç note –≤ Chatwoot –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø–µ—Ä–µ–Ω–æ—Å–æ–≤
  - `pull_cons_rates_cl.py` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç note –≤ Chatwoot –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –æ—Ü–µ–Ω–æ–∫
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ Chatwoot user_id ‚Üî –¶–õ manager_key
  - –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `sys.user_mapping` (chatwoot_user_id, cl_manager_key)
  - –û–±–Ω–æ–≤–ª–µ–Ω –≤–µ–±—Ö—É–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–∞–ø–ø–∏–Ω–≥–∞ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –¶–õ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ `–î–∞—Ç–∞–û—Ü–µ–Ω–∫–∏` –≤ ETL –æ—Ü–µ–Ω–æ–∫
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `rating_date` –≤ `cons.cons_rating_answers`
  - ETL –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `–î–∞—Ç–∞–û—Ü–µ–Ω–∫–∏` –∏–∑ OData (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ `Period` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
  - –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ü–µ–Ω–∫–∏ —á–µ—Ä–µ–∑ API —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `–î–∞—Ç–∞–û—Ü–µ–Ω–∫–∏` –≤ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è `manager_key` –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ 1C:–¶–õ
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ GUID (–Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è "FRONT")
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å –ø–æ–ª–Ω—ã–º —Ç–µ–ª–æ–º –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞
- ‚úÖ `chatwoot_source_id` –≤ –æ—Ç–≤–µ—Ç–∞—Ö API
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ `POST /api/consultations/create`
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ `GET /api/consultations/{cons_id}`
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è

---

## üìã –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è (–º–µ–ª–∫–∏–µ –∑–∞–¥–∞—á–∏)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í—ã—Å–æ–∫–∏–π

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è OpenID —Ç–æ–∫–µ–Ω–∞**
   - –°—Ç–∞—Ç—É—Å: –ù–∞ –ø–∞—É–∑–µ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Ä–∞–∑–æ–±—Ä–∞–ª—Å—è —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π 1C:–§—Ä–µ—à)
   - –ß—Ç–æ –Ω—É–∂–Ω–æ: –ü–æ–ª—É—á–∏—Ç—å issuer URL –∏ JWKS endpoint –æ—Ç 1C:–§—Ä–µ—à
   - –§–∞–π–ª—ã: `FastAPI/routers/auth.py`, `FastAPI/dependencies/security.py`

2. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ cons.cons**
   - `topic` ‚Äî —Ç–µ–º–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ (–µ—Å—Ç—å –≤ —Å—Ö–µ–º–µ, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)
   - `source` ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–∑–¥–∞–Ω–∏—è (SITE, TELEGRAM, CALL_CENTER)
   - `priority` ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
   - `tags` (JSONB) ‚Äî —Ç–µ–≥–∏ –∏–∑ Chatwoot
   - `custom_attributes` (JSONB) ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã

3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ cons.clients**
   - `chatwoot_contact_id` ‚Äî ID –∫–æ–Ω—Ç–∞–∫—Ç–∞ –≤ Chatwoot –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - `company_name` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ (–æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç `name`)

4. **Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π**
   - –î–æ–±–∞–≤–∏—Ç—å retry —Å backoff –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–æ–∑–¥–∞–Ω–∏—è –≤ Chatwoot/–¶–õ
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å failed attempts –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π

5. **–£–ª—É—á—à–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–æ–≤**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ `message.created` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `q_and_a` –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ `conversation.assigned` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ `conversation.typing` ‚Äî —Å—Ç–∞—Ç—É—Å –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞

6. **API –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∑–≤–æ–Ω–æ–≤**
   - `GET /api/consultations/{cons_id}/calls` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ø—ã—Ç–æ–∫ –¥–æ–∑–≤–æ–Ω–∞
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ, –º–µ–Ω–µ–¥–∂–µ—Ä—É

7. **API –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
   - `GET /api/consultations/{cons_id}/history` ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤, –ø–µ—Ä–µ–Ω–æ—Å–æ–≤, –æ—Ü–µ–Ω–æ–∫
   - –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ë–î
   - –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints (`/redates`, `/ratings`, `/calls`) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏

8. **–£–ª—É—á—à–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ ETL
   - Redis –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (–µ—Å–ª–∏ –±—É–¥–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤)

9. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ETL**
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
   - Batch processing –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ETL
   - –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é –∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–∏–∑–∫–∏–π

10. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏**
    - Prometheus –º–µ—Ç—Ä–∏–∫–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞, –æ—à–∏–±–∫–∏)
    - Health checks –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (Chatwoot, 1C:–¶–õ)
    - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

11. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
    - Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ (chatwoot_client, onec_client)
    - Integration —Ç–µ—Å—Ç—ã –¥–ª—è API endpoints
    - E2E —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

12. **–£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –∫–æ–¥–∞**
    - –£–¥–∞–ª–∏—Ç—å `FastAPI/routers/tickets.py` (deprecated)
    - –û—á–∏—Å—Ç–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Ö–µ–º—ã

13. ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–æ
   - Swagger/OpenAPI –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö endpoints (—á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
   - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
   - –î–∏–∞–≥—Ä–∞–º–º—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–≤ ARCHITECTURE.md)
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã ARCHITECTURE.md, API_DOCUMENTATION.md –∏ ROADMAP.md —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

14. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
    - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ CORS –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
    - Rate limiting –¥–ª—è API
    - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (sanitization)

15. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
    - Connection pooling –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
    - –ò–Ω–¥–µ–∫—Å—ã –ë–î –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞–º

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–±–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏):

1. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–∑–≤–æ–Ω–æ–≤ –≤ Chatwoot –ø—Ä–∏ ETL** (30 –º–∏–Ω)
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `pull_calls_cl.py`
   - –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É note-—Å–æ–æ–±—â–µ–Ω–∏–π

2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤/–æ—Ü–µ–Ω–æ–∫ –≤ Chatwoot –ø—Ä–∏ ETL** (30 –º–∏–Ω)
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `pull_cons_redate_cl.py` –∏ `pull_cons_rates_cl.py`

3. **API –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∑–≤–æ–Ω–æ–≤** (1 —á–∞—Å)
   - Endpoint `GET /api/consultations/{cons_id}/calls`
   - –°—Ö–µ–º–∞ –∏ —Ä–æ—É—Ç–µ—Ä

4. **–ú–∞–ø–ø–∏–Ω–≥ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –≤ –≤–µ–±—Ö—É–∫–∞—Ö** (1 —á–∞—Å)
   - –¢–∞–±–ª–∏—Ü–∞ `sys.user_mapping`
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

5. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –º–æ–¥–µ–ª—è—Ö** (2 —á–∞—Å–∞)
   - –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º –∏ —Ä–æ—É—Ç–µ—Ä–æ–≤

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (1-2 –Ω–µ–¥–µ–ª–∏):

6. Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π
7. API –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
8. –£–ª—É—á—à–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–æ–≤ (message.created, typing)
9. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):

10. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
11. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
12. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üìù –ó–∞–º–µ—Ç–∫–∏

- **OpenID –≤–∞–ª–∏–¥–∞—Ü–∏—è:** –û–∂–∏–¥–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ 1C:–§—Ä–µ—à –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–µ–π—á–∞—Å in-memory, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ Redis –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏
- **ETL —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ APScheduler - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ ETL –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (ELK, Loki)

